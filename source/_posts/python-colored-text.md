---
title: Python在控制台打印彩色文本
date: 2022-10-26 16:32:57
tags: [Python]
---

# 前言

最近开发的一个项目需要在控制台输出一些debug信息，由于输出的debug信息较多，因此考虑能否通过设置不同的输出样式来快速定位关键的debug信息（如错误、警告等）。

本篇博客将介绍：

- 为什么能在控制台输出不同样式的文字

- 如何在控制台输出不同样式的文字

- 如何用Python在控制台输出不同样式的文字

# Python中打印彩色文本

在实现了ANSI的终端中，我们可以利用Python和ANSI转义字符实现打印彩色的文本。可以在不同的终端运行下面的脚本查看多种色彩的效果。

```python
def print_format_table():
    """
    prints table of formatted text format options
    """
    for style in range(8):
        for fg in range(30,38):
            s1 = ''
            for bg in range(40,48):
                format = ';'.join([str(style), str(fg), str(bg)])
                s1 += '\x1b[%sm %s \x1b[0m' % (format, format)
            print(s1)
        print('\n')

print_format_table()
```
其中`\x1b`即为`Escape`对应的转义字符, `\x1b[`为CSI序列，`\x1b[  m`为SGR序列，`\x1b[0m`为重置SGR样式对应的指令。

一些常用的样式如下

```python
print("\033[1;30;47mPython Format 1\033[0m")
print("\033[0;31;40mPython Format 2\033[0m")
print("\033[0;32;40mPython Format 3\033[0m")
print("\033[0;33;40mPython Format 4\033[0m")
print("\033[1;37;41mPython Format 5\033[0m")
print("\033[1;37;42mPython Format 6\033[0m")
print("\033[1;37;43mPython Format 7\033[0m")
```


# 相关概念

## ASCII
ASCII（发音/ˈæski/，American Standard Code for Information Interchange，美国信息交换标准代码）是基于拉丁字母的一套电脑编码系统。ASCII 由电报码发展而来，共定义了128个字符；其中33个字符无法显示（一些终端提供了扩展，使得这些字符可显示为诸如笑脸、扑克牌花式等8-bit符号），且这33个字符多数都已是陈废的控制字符。控制字符的用途主要是用来操控已经处理过的文字。在33个字符之外的是95个可显示的字符。

ASCII 控制字符表

| 二进制    | 十进制 | 十六进制 | 缩写 | Unicode表示 | 插入符表示 | 含义           |
| --------- | ------ | -------- | ---- | ----------- | ---------- | -------------- |
| 0000 0000 | 0      | 00       | NUL  | ␀           | ^@         | 空字符（Null） |
| 0000 0001 | 1      | 01       | SOH  | ␁           | ^A         | 标题开始       |
| 0000 0010 | 2      | 02       | STX  | ␂           | ^B         | 本文开始       |
| 0000 0011 | 3      | 03       | ETX  | ␃           | ^C         | 本文结束       |
| 0000 0100 | 4      | 04       | EOT  | ␄           | ^D         | 传输结束       |
| 0000 0101 | 5      | 05       | ENQ  | ␅           | ^E         | 请求           |
| 0000 0110 | 6      | 06       | ACK  | ␆           | ^F         | 确认回应       |
| 0000 0111 | 7      | 07       | BEL  | ␇           | ^G         | 响铃           |
| 0000 1000 | 8      | 08       | BS   | ␈           | ^H         | 退格           |
| 0000 1001 | 9      | 09       | HT   | ␉           | ^I         | 水平定位符号   |
| 0000 1010 | 10     | 0A       | LF   | ␊           | ^J         | 换行键         |
| 0000 1011 | 11     | 0B       | VT   | ␋           | ^K         | 垂直定位符号   |
| 0000 1100 | 12     | 0C       | FF   | ␌           | ^L         | 换页键         |
| 0000 1101 | 13     | 0D       | CR   | ␍           | ^M         | CR             |
| 0000 1110 | 14     | 0E       | SO   | ␎           | ^N         | 取消变换       |
| 0000 1111 | 15     | 0F       | SI   | ␏           | ^O         | 启用变换       |
| 0001 0000 | 16     | 10       | DLE  | ␐           | ^P         | 跳出数据通讯   |
| 0001 0001 | 17     | 11       | DC1  | ␑           | ^Q         | 设备控制一     |
| 0001 0010 | 18     | 12       | DC2  | ␒           | ^R         | 设备控制二     |
| 0001 0011 | 19     | 13       | DC3  | ␓           | ^S         | 设备控制三     |
| 0001 0100 | 20     | 14       | DC4  | ␔           | ^T         | 设备控制四     |
| 0001 0101 | 21     | 15       | NAK  | ␕           | ^U         | 确认失败回应   |
| 0001 0110 | 22     | 16       | SYN  | ␖           | ^V         | 同步用暂停     |
| 0001 0111 | 23     | 17       | ETB  | ␗           | ^W         | 区块传输结束   |
| 0001 1000 | 24     | 18       | CAN  | ␘           | ^X         | 取消           |
| 0001 1001 | 25     | 19       | EM   | ␙           | ^Y         | 连线介质中断   |
| 0001 1010 | 26     | 1A       | SUB  | ␚           | ^Z         | 替换           |
| 0001 1011 | 27     | 1B       | ESC  | ␛           | ^[         | 退出键         |
| 0001 1100 | 28     | 1C       | FS   | ␜           | ^\\        | 文件分割符     |
| 0001 1101 | 29     | 1D       | GS   | ␝           | ^]         | 组群分隔符     |
| 0001 1110 | 30     | 1E       | RS   | ␞           | ^^         | 记录分隔符     |
| 0001 1111 | 31     | 1F       | US   | ␟           | ^_         | 单元分隔符     |
| 0111 1111 | 127    | 7F       | DEL  | ␡           | ^?         | Delete字符     |


ASCII 显示字符表

| 二进制    | 十进制 | 十六进制 | 字符   |
| --------- | ------ | -------- | ------ |
| 0010 0000 | 32     | 20       | (空格) |
| 0010 0001 | 33     | 21       | !      |
| 0010 0010 | 34     | 22       | "      |
| 0010 0011 | 35     | 23       | #      |
| 0010 0100 | 36     | 24       | $      |
| 0010 0101 | 37     | 25       | %      |
| 0010 0110 | 38     | 26       | &      |
| 0010 0111 | 39     | 27       | '      |
| 0010 1000 | 40     | 28       | (      |
| 0010 1001 | 41     | 29       | )      |
| 0010 1010 | 42     | 2A       | *      |
| 0010 1011 | 43     | 2B       | +      |
| 0010 1100 | 44     | 2C       | ,      |
| 0010 1101 | 45     | 2D       | -      |
| 0010 1110 | 46     | 2E       | .      |
| 0010 1111 | 47     | 2F       | /      |
| 0011 0000 | 48     | 30       | 0      |
| 0011 0001 | 49     | 31       | 1      |
| 0011 0010 | 50     | 32       | 2      |
| 0011 0011 | 51     | 33       | 3      |
| 0011 0100 | 52     | 34       | 4      |
| 0011 0101 | 53     | 35       | 5      |
| 0011 0110 | 54     | 36       | 6      |
| 0011 0111 | 55     | 37       | 7      |
| 0011 1000 | 56     | 38       | 8      |
| 0011 1001 | 57     | 39       | 9      |
| 0011 1010 | 58     | 3A       | :      |
| 0011 1011 | 59     | 3B       | ;      |
| 0011 1100 | 60     | 3C       | <      |
| 0011 1101 | 61     | 3D       | =      |
| 0011 1110 | 62     | 3E       | >      |
| 0011 1111 | 63     | 3F       | ?      |
| 0100 0000 | 64     | 40       | @      |
| 0100 0001 | 65     | 41       | A      |
| 0100 0010 | 66     | 42       | B      |
| 0100 0011 | 67     | 43       | C      |
| 0100 0100 | 68     | 44       | D      |
| 0100 0101 | 69     | 45       | E      |
| 0100 0110 | 70     | 46       | F      |
| 0100 0111 | 71     | 47       | G      |
| 0100 1000 | 72     | 48       | H      |
| 0100 1001 | 73     | 49       | I      |
| 0100 1010 | 74     | 4A       | J      |
| 0100 1011 | 75     | 4B       | K      |
| 0100 1100 | 76     | 4C       | L      |
| 0100 1101 | 77     | 4D       | M      |
| 0100 1110 | 78     | 4E       | N      |
| 0100 1111 | 79     | 4F       | O      |
| 0101 0000 | 80     | 50       | P      |
| 0101 0001 | 81     | 51       | Q      |
| 0101 0010 | 82     | 52       | R      |
| 0101 0011 | 83     | 53       | S      |
| 0101 0100 | 84     | 54       | T      |
| 0101 0101 | 85     | 55       | U      |
| 0101 0110 | 86     | 56       | V      |
| 0101 0111 | 87     | 57       | W      |
| 0101 1000 | 88     | 58       | X      |
| 0101 1001 | 89     | 59       | Y      |
| 0101 1010 | 90     | 5A       | Z      |
| 0101 1011 | 91     | 5B       | [      |
| 0101 1100 | 92     | 5C       | \      |
| 0101 1101 | 93     | 5D       | ]      |
| 0101 1110 | 94     | 5E       | ^      |
| 0101 1111 | 95     | 5F       | _      |
| 0110 0000 | 96     | 60       | `      |
| 0110 0001 | 97     | 61       | a      |
| 0110 0010 | 98     | 62       | b      |
| 0110 0011 | 99     | 63       | c      |
| 0110 0100 | 100    | 64       | d      |
| 0110 0101 | 101    | 65       | e      |
| 0110 0110 | 102    | 66       | f      |
| 0110 0111 | 103    | 67       | g      |
| 0110 1000 | 104    | 68       | h      |
| 0110 1001 | 105    | 69       | i      |
| 0110 1010 | 106    | 6A       | j      |
| 0110 1011 | 107    | 6B       | k      |
| 0110 1100 | 108    | 6C       | l      |
| 0110 1101 | 109    | 6D       | m      |
| 0110 1110 | 110    | 6E       | n      |
| 0110 1111 | 111    | 6F       | o      |
| 0111 0000 | 112    | 70       | p      |
| 0111 0001 | 113    | 71       | q      |
| 0111 0010 | 114    | 72       | r      |
| 0111 0011 | 115    | 73       | s      |
| 0111 0100 | 116    | 74       | t      |
| 0111 0101 | 117    | 75       | u      |
| 0111 0110 | 118    | 76       | v      |
| 0111 0111 | 119    | 77       | w      |
| 0111 1000 | 120    | 78       | x      |
| 0111 1001 | 121    | 79       | y      |
| 0111 1010 | 122    | 7A       | z      |
| 0111 1011 | 123    | 7B       | {      |
| 0111 1100 | 124    | 7C       | \|     |
| 0111 1101 | 125    | 7D       | }      |
| 0111 1110 | 126    | 7E       | ~      |

## ANSI转义序列

ANSI转义序列（ANSI escape sequences）是一种带内信号的转义序列标准，用于控制视频文本终端上的光标位置、颜色和其他选项。在文本中嵌入确定的字节序列，大部分以ESC转义字符和"["字符开始，终端会把这些字节序列解释为相应的指令，而不是普通的字符编码。 

ANSI转义序列具有不同的长度，所有序列都以ASCII字符ESC（27 / 十六进制 0x1B）开头，第二个字节则是0x40–0x5F（ASCII @A–Z[\\]^_）范围内的字符。

控制序列导入器（Control Sequence Introducer, CSI）由`ESC [`、若干个（包括0个）“参数字节”（字符范围0x30–0x3F）、若干个“中间字节”（字符范围0x20–0x2F），以及一个“最终字节”（字符范围0x40–0x7E）组成。

其中`CSI n m`代表选择图形再现（Select Graphic Rendition, SGR），其中包含对文字颜色的设置。

SGR参数表

| 代码    | 作用                       |
| ------- | -------------------------- |
| 0       | 重置/正常                  |
| 1       | 粗体或增加强度             |
| 2       | 弱化（降低强度）           |
| 3       | 斜体                       |
| 4       | 下划线                     |
| 5       | 缓慢闪烁                   |
| 6       | 快速闪烁                   |
| 7       | 反显                       |
| 8       | 隐藏                       |
| 9       | 划除                       |
| 10      | 主要（默认）字体           |
| 11–19   | 替代字体                   |
| 20      | 尖角体                     |
| 21      | 关闭粗体或双下划线         |
| 22      | 正常颜色或强度             |
| 23      | 非斜体、非尖角体           |
| 24      | 关闭下划线                 |
| 25      | 关闭闪烁                   |
| 27      | 关闭反显                   |
| 28      | 关闭隐藏                   |
| 29      | 关闭划除                   |
| 30–37   | 设置前景色                 |
| 38      | 设置前景色                 |
| 39      | 默认前景色                 |
| 40–47   | 设置背景色                 |
| 48      | 设置背景色                 |
| 49      | 默认背景色                 |
| 51      | Framed                     |
| 52      | Encircled                  |
| 53      | 上划线                     |
| 54      | Not framed or encircled    |
| 55      | 关闭上划线                 |
| 60      | 表意文字下划线或右边线     |
| 61      | 表意文字双下划线或双右边线 |
| 62      | 表意文字上划线或左边线     |
| 63      | 表意文字双上划线或双左边线 |
| 64      | 表意文字着重标志           |
| 65      | 表意文字属性关闭           |
| 90–97   | 设置明亮的前景色           |
| 100–107 | 设置明亮的背景色           |

ANSI初始初始定义了8种颜色，包含前景色与背景色。

ANSI颜色表

| 名称       | 前景色代码 | 背景色代码 |
| ---------- | ---------- | ---------- |
| 黑         | 30         | 40         |
| 红         | 31         | 41         |
| 绿         | 32         | 42         |
| 黄         | 33         | 43         |
| 蓝         | 34         | 44         |
| 品红       | 35         | 45         |
| 青         | 36         | 46         |
| 白         | 37         | 47         |
| 亮黑（灰） | 90         | 100        |
| 亮红       | 91         | 101        |
| 亮绿       | 92         | 102        |
| 亮黄       | 93         | 103        |
| 亮蓝       | 94         | 104        |
| 亮品红     | 95         | 105        |
| 亮青       | 96         | 106        |
| 亮白       | 97         | 107        |


# 参考

- https://en.wikipedia.org/wiki/ASCII
- https://en.wikipedia.org/wiki/ANSI_escape_code
- https://stackoverflow.com/questions/287871/how-do-i-print-colored-text-to-the-terminal